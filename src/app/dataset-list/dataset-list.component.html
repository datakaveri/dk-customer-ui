<app-header></app-header>
<div class="para-div" *ngIf="show_data">
    <p *ngIf="!(searchQuery.tags.length == 0 && searchQuery.text == '')">
        <span>{{ results.count }}</span>
        <span> Dataset(s) for </span>
        <span>{{ search_text }}</span>
        <span> matching search criteria</span>
    </p>
    <p *ngIf="searchQuery.tags.length == 0 && searchQuery.text == ''">
        <span>{{ results.count }}</span>
        <span> Dataset(s) Available </span>
    </p>
</div>
<div class="content-container">
    <div class="results-div">
        <div class="results-item" *ngFor="let resource of results?.items">

            <li *ngIf="resource.resourceAuthControlLevel != 'OPEN'"><span class="status status-private">Private</span></li>
            <li *ngIf="resource.resourceAuthControlLevel == 'OPEN'"><span class="status status-public">Public</span></li>
            <li><h3>{{ resource.label }}</h3></li>

            <li class="results-item-about">
                <div class="results-item-location"><img src='../../assets/location.png'><span>{{resource.location.address}}</span></div>
                <div class="results-item-resources"><img src='../../assets/resources.png'><span>{{ resource.resource_items }} Resources</span></div>
            </li>

            <li class='results-item-id'>Dataset ID: {{ resource.id.length > 85 ? resource.id.substring(0,85)+'.....' : resource.id }}<span class='copy'><img src="../../assets/copy.png" title="Copy {{texts.resource_groups}} ID" (click)="copy(resource.id)"></span></li>

            <li>Description: {{resource.description}}</li>
            <li>Publisher: {{ resource.provider.description }}</li>
            <div class="results-item-link">
                <a (click)="getResourceItems(resource)">View Details</a>
            </div>
            <div *ngIf="resource.resourceAuthControlLevel == 'OPEN'" class="results-item-shade green"></div>
            <div *ngIf="resource.resourceAuthControlLevel != 'OPEN'" class="results-item-shade light-green"></div>
        </div>
    </div>
</div>
<div class="filder_popup" *ngIf="show_filter">
    <div class="header">
        FILTERS
        <img src="assets/cross.png" (click)="close()">
    </div>
    <h4>
        Filter by Tag(s)
    </h4>
    <div class="input_div">
        <input placeholder="Search Tag . . ." [(ngModel)]="search.tag" (ngModelChange)="filter_by_tag()">
        <img src="assets/search.png">
    </div>
    <div class="scroll_div">
        <ul>
            <li *ngFor="let tag of filtered_tags" (click)="toggle_tag(tag.tag)">
                <img src="assets/unchecked.png" *ngIf="!find_tag_status(tag.tag)">
                <img src="assets/checked.png" *ngIf="find_tag_status(tag.tag)">
                {{tag.tag}} ({{tag.count}} {{texts.resource_groups}})
            </li>
        </ul>
    </div>
    <h4>
        <img src="assets/filter.png">
        Filter by {{texts.providers}}(s)
    </h4>
    <div class="input_div">
        <input placeholder="Search {{texts.providers}} . . ." [(ngModel)]="search.provider" (ngModelChange)="filter_by_provider()">
        <img src="assets/search.png">
    </div>
    <div class="scroll_div">
        <ul>
            <li *ngFor="let provider of filtered_providers" (click)="toggle_provider(provider.id)">
                <img src="assets/unchecked.png" *ngIf="!find_provider_status(provider.id)">
                <img src="assets/checked.png" *ngIf="find_provider_status(provider.id)">
                {{provider.name}}
            </li>
        </ul>
    </div>
    <div class="button_div">
        <button class="side_button" (click)="clear()">Clear All Filters</button>
        <button class="main_button" (click)="apply()">Apply Filters</button>
    </div>
</div>
<router-outlet></router-outlet>
