<div class="content-container">
    <div class="para-div" *ngIf="show_data">
        <p *ngIf="!(searchQuery.tags.length == 0 && searchQuery.text == '')">
            <span>{{ results.count }}</span>
            <span> Dataset(s) for </span>
            <span>{{ search_text }}</span>
            <span> matching search criteria</span>
        </p>
        <p *ngIf="searchQuery.tags.length == 0 && searchQuery.text == ''">
            <span>{{ results.count }}</span>
            <span> Dataset(s) Available </span>
        </p>
    </div>
    <div class="results-div">
        <div class="box-style" *ngFor="let resource of results?.items">
            <h4>
                {{ resource.name }}
                <img src="assets/locked.png" *ngIf="resource.resourceAuthControlLevel != 'OPEN'">
                <img src="assets/unlocked.png" *ngIf="resource.resourceAuthControlLevel == 'OPEN'">
            </h4>
            <p>
                <span>{{texts.resource_groups}} ID: </span>{{ resource.id }}
                <img src="assets/copy.png" title="Copy {{texts.resource_groups}} ID" (click)="copy(resource.id)">
            </p>
            <p>
                <span>Description: </span>{{ resource.description }}
            </p>
            <p>
                <span>{{texts.providers}}: </span>{{ resource.provider.description }}
            </p>
            <p>
                <span>Location: </span>{{ resource.location.address }}
            </p>
            <p>
                <span>{{texts.resource_items}}s Count: </span>{{ resource.resource_items }}
            </p>
            <a (click)="getResourceItems(resource)">View Details</a>
            <a (click)='showSampleData()'>Get Sample Data</a>
        </div>
    </div>
</div>
<div class="filder_popup" *ngIf="show_filter">
    <div class="header">
        FILTERS
        <img src="assets/cross.png" (click)="close()">
    </div>
    <h4>
        <img src="assets/filter.png">
        Filter by Tag(s)
    </h4>
    <div class="input_div">
        <input placeholder="Search Tag . . ." [(ngModel)]="search.tag" (ngModelChange)="filter_by_tag()">
        <img src="assets/search.png">
    </div>
    <div class="scroll_div">
        <ul>
            <li *ngFor="let tag of filtered_tags" (click)="toggle_tag(tag.tag)">
                <img src="assets/unchecked.png" *ngIf="!find_tag_status(tag.tag)">
                <img src="assets/checked.png" *ngIf="find_tag_status(tag.tag)">
                {{tag.tag}} ({{tag.count}} {{texts.resource_groups}})
            </li>
        </ul>
    </div>
    <h4>
        <img src="assets/filter.png">
        Filter by {{texts.providers}}(s)
    </h4>
    <div class="input_div">
        <input placeholder="Search {{texts.providers}} . . ." [(ngModel)]="search.provider" (ngModelChange)="filter_by_provider()">
        <img src="assets/search.png">
    </div>
    <div class="scroll_div">
        <ul>
            <li *ngFor="let provider of filtered_providers" (click)="toggle_provider(provider.id)">
                <img src="assets/unchecked.png" *ngIf="!find_provider_status(provider.id)">
                <img src="assets/checked.png" *ngIf="find_provider_status(provider.id)">
                {{provider.name}}
            </li>
        </ul>
    </div>
    <div class="button_div">
        <button class="side_button" (click)="clear()">Clear All Filters</button>
        <button class="main_button" (click)="apply()">Apply Filters</button>
    </div>
</div>

<div *ngIf='showSample' class="samplePopup">
    <div class="samplePopup_head">
        <h3 class="samplePopup_title">Sample Data</h3>
        <span (click)='hideSampleData()' class="samplePopup_icon"><img src='assets/cross.png'></span>
    </div>
    <div class="samplePopup_body">
        <div *ngFor="let item of  sampleData[0] | keyvalue" class="samplePopup_item">
                <h3>{{item.key}}</h3>
                <p>{{item.value}}</p>
        </div>
    </div>
</div>
<div [ngClass]="{fadeIn:overlay}"></div>
